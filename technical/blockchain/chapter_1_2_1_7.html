<!DOCTYPE HTML>
<html lang="zh-CN" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>å·¥å…·é›†æˆ - ä¿¡æ¯æŠ€æœ¯ | AwesomeProgram</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="æ‰€æ€å³æ‰€è§ï¼Œæ‰€è§å³æ‰€å¾—ï¼Œæ‰€å¾—çš†æ‰€æƒ³ï¼ŒæŠ€æœ¯ä»æœªåœæ­‡ï¼Œä¹Ÿæœªæ›¾ç¼ºä¹">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../PrefixChapter.html">å‰è¨€</a></li><li class="chapter-item expanded "><a href="../rust/chapter_1.html"><strong aria-hidden="true">1.</strong> Rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust/chapter_1_1.html"><strong aria-hidden="true">1.1.</strong> Rust è¯­æ³•ç»“æ„</a></li><li class="chapter-item expanded "><a href="../rust/chapter_1_4.html"><strong aria-hidden="true">1.2.</strong> Rust æ ‡å‡†åº“</a></li><li class="chapter-item expanded "><a href="../rust/chapter_1_5.html"><strong aria-hidden="true">1.3.</strong> Rust å·¥å…·é“¾</a></li><li class="chapter-item expanded "><a href="../rust/chapter_1_6.html"><strong aria-hidden="true">1.4.</strong> Rust ç±»å‹æ“ä½œ</a></li><li class="chapter-item expanded "><a href="../rust/chapter_1_7.html"><strong aria-hidden="true">1.5.</strong> Rust ç¼–ç èŒƒå¼</a></li></ol></li><li class="chapter-item expanded "><a href="../go/chapter_1.html"><strong aria-hidden="true">2.</strong> Go</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../go/chapter_1_1.html"><strong aria-hidden="true">2.1.</strong> Go è¯­æ³•ç»“æ„</a></li><li class="chapter-item expanded "><a href="../go/chapter_1_2.html"><strong aria-hidden="true">2.2.</strong> Go æ ‡å‡†åº“</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_3.html"><strong aria-hidden="true">3.</strong> å„è¯­è¨€å¯¹æ¯”</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1.html"><strong aria-hidden="true">4.</strong> åŒºå—é“¾</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blockchain/chapter_1_1.html"><strong aria-hidden="true">4.1.</strong> åŒºå—é“¾ç®€å²</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2.html"><strong aria-hidden="true">4.2.</strong> åŒºå—é“¾æ¡†æ¶</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1.html"><strong aria-hidden="true">4.2.1.</strong> substrate</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_1.html"><strong aria-hidden="true">4.2.1.1.</strong> åŸºæœ¬åŸç†</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_2.html"><strong aria-hidden="true">4.2.1.2.</strong> æ„å»ºä¸ç¼–ç </a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_3.html"><strong aria-hidden="true">4.2.1.3.</strong> å¯åŠ¨åŒºå—é“¾ç½‘ç»œ</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_4.html"><strong aria-hidden="true">4.2.1.4.</strong> è‡ªå®šä¹‰pallet</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_5.html"><strong aria-hidden="true">4.2.1.5.</strong> å¼€å‘æ™ºèƒ½åˆçº¦</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_6.html"><strong aria-hidden="true">4.2.1.6.</strong> æ¡¥æ¥å…¶å®ƒé“¾</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_7.html" class="active"><strong aria-hidden="true">4.2.1.7.</strong> å·¥å…·é›†æˆ</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_1_8.html"><strong aria-hidden="true">4.2.1.8.</strong> æµ‹è¯•</a></li></ol></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_2.html"><strong aria-hidden="true">4.2.2.</strong> fabric</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_2_1.html"><strong aria-hidden="true">4.2.2.1.</strong> åŸºæœ¬åŸç†</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_2_2.html"><strong aria-hidden="true">4.2.2.2.</strong> æ„å»ºä¸å¼€å‘</a></li></ol></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_3.html"><strong aria-hidden="true">4.2.3.</strong> EOSIO</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_3_1.html"><strong aria-hidden="true">4.2.3.1.</strong> åŸºæœ¬åŸç†</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_2_3_2.html"><strong aria-hidden="true">4.2.3.2.</strong> æ„å»ºä¸å¼€å‘</a></li></ol></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_3.html"><strong aria-hidden="true">4.2.4.</strong> æ™ºèƒ½åˆçº¦ä¸DApp</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blockchain/chapter_1_3_1.html"><strong aria-hidden="true">4.2.4.1.</strong> Move</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_3_2.html"><strong aria-hidden="true">4.2.4.2.</strong> Solidity</a></li><li class="chapter-item expanded "><a href="../blockchain/chapter_1_3_3.html"><strong aria-hidden="true">4.2.4.3.</strong> Hardhat</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../cloud/chapter_1.html"><strong aria-hidden="true">5.</strong> äº‘è®¡ç®—</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cloud/chapter_1_1.html"><strong aria-hidden="true">5.1.</strong> äº‘è®¡ç®—ç®€å²</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_2.html"><strong aria-hidden="true">5.2.</strong> èµ„æºç¼–æ’æ¡†æ¶</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cloud/chapter_1_2_1.html"><strong aria-hidden="true">5.2.1.</strong> kubernetes</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_2_2.html"><strong aria-hidden="true">5.2.2.</strong> openstack</a></li></ol></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_3.html"><strong aria-hidden="true">5.3.</strong> è™šæ‹ŸåŒ–</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cloud/chapter_1_3_1.html"><strong aria-hidden="true">5.3.1.</strong> è®¡ç®—</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_3_2.html"><strong aria-hidden="true">5.3.2.</strong> ç½‘ç»œ</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_3_3.html"><strong aria-hidden="true">5.3.3.</strong> å­˜å‚¨</a></li></ol></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_4.html"><strong aria-hidden="true">5.4.</strong> å®¹å™¨</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cloud/chapter_1_4_1.html"><strong aria-hidden="true">5.4.1.</strong> docker</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_4_2.html"><strong aria-hidden="true">5.4.2.</strong> containerd</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_4_3.html"><strong aria-hidden="true">5.4.3.</strong> podman</a></li></ol></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_5.html"><strong aria-hidden="true">5.5.</strong> é«˜çº§è¯­è¨€è™šæ‹Ÿæœº</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cloud/chapter_1_5_1.html"><strong aria-hidden="true">5.5.1.</strong> wasm</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_5_2.html"><strong aria-hidden="true">5.5.2.</strong> jvm</a></li><li class="chapter-item expanded "><a href="../cloud/chapter_1_5_3.html"><strong aria-hidden="true">5.5.3.</strong> evm</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../privacy/chapter_1.html"><strong aria-hidden="true">6.</strong> éšç§è®¡ç®—</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../privacy/chapter_1_1.html"><strong aria-hidden="true">6.1.</strong> å¯†ç å­¦ç›¸å…³</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../privacy/chapter_1_1_1.html"><strong aria-hidden="true">6.1.1.</strong> é›¶çŸ¥è¯†è¯æ˜</a></li><li class="chapter-item expanded "><a href="../privacy/chapter_1_1_2.html"><strong aria-hidden="true">6.1.2.</strong> MPC</a></li><li class="chapter-item expanded "><a href="../privacy/chapter_1_1_3.html"><strong aria-hidden="true">6.1.3.</strong> å·®åˆ†éšç§</a></li><li class="chapter-item expanded "><a href="../privacy/chapter_1_1_4.html"><strong aria-hidden="true">6.1.4.</strong> ç§˜å¯†å…±äº«</a></li><li class="chapter-item expanded "><a href="../privacy/chapter_1_1_5.html"><strong aria-hidden="true">6.1.5.</strong> åŒæ€åŠ å¯†</a></li></ol></li><li class="chapter-item expanded "><a href="../privacy/chapter_1_2.html"><strong aria-hidden="true">6.2.</strong> å¯ä¿¡æ‰§è¡Œç¯å¢ƒ</a></li><li class="chapter-item expanded "><a href="../privacy/chapter_1_3.html"><strong aria-hidden="true">6.3.</strong> è”é‚¦å­¦ä¹ </a></li></ol></li><li class="chapter-item expanded "><a href="../quantum/chapter_1.html"><strong aria-hidden="true">7.</strong> é‡å­è®¡ç®—</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../quantum/chapter_1_1.html"><strong aria-hidden="true">7.1.</strong> é‡å­çŠ¶æ€ä¸é‡å­æ¯”ç‰¹</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_2.html"><strong aria-hidden="true">7.2.</strong> å¤šé‡å­æ¯”ç‰¹ä¸é‡å­çº ç¼ </a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_3.html"><strong aria-hidden="true">7.3.</strong> é‡å­åè®®å’Œé‡å­ç®—æ³•</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_4.html"><strong aria-hidden="true">7.4.</strong> é‡å­ç®—æ³•çš„åº”ç”¨</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_5.html"><strong aria-hidden="true">7.5.</strong> ä½¿ç”¨é‡å­ç”µè·¯ç ”ç©¶é‡å­ç¡¬ä»¶</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_6.html"><strong aria-hidden="true">7.6.</strong> ä½¿ç”¨å¾®æ³¢è„‰å†²ç ”ç©¶é‡å­ç¡¬ä»¶</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_7.html"><strong aria-hidden="true">7.7.</strong> é‡å­è®¡ç®—å®éªŒå®¤</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_8.html"><strong aria-hidden="true">7.8.</strong> é‡å­è®¡ç®—æ¸¸æˆå’Œæ¼”ç¤º</a></li><li class="chapter-item expanded "><a href="../quantum/chapter_1_9.html"><strong aria-hidden="true">7.9.</strong> é‡å­è®¡ç®—åº”ç”¨å¼€å‘</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_8.html"><strong aria-hidden="true">8.</strong> è½¯è€ƒè®°å½•</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ä¿¡æ¯æŠ€æœ¯ | AwesomeProgram</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="å·¥å…·é›†æˆ"><a class="header" href="#å·¥å…·é›†æˆ">å·¥å…·é›†æˆ</a></h1>
<p>æœ¬æ•™ç¨‹é‡ç‚¹ä»‹ç»äº†å·¥ä¸€äº›å…·å’ŒèŠ‚ç‚¹æ‰©å±•ï¼Œè¿™äº›å·¥å…·å’ŒèŠ‚ç‚¹æ‰©å±•ä½¿ä½ èƒ½å¤Ÿéƒ¨ç½²ä¸å…¶ä»–ç³»ç»Ÿé›†æˆçš„èŠ‚ç‚¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨é¢å¤–çš„ç”Ÿæ€ç³»ç»Ÿå·¥å…·ï¼Œè®©ä½ èƒ½å¤Ÿè®¿é—®ã€åŒæ­¥ï¼Œä¸ä½ è‡ªå·±æˆ–å…¶ä»–åŒºå—é“¾çš„ä¿¡æ¯è¿›è¡Œäº¤äº’ã€‚</p>
<h2 id="é›†æˆä¸€ä¸ªè½»å®¢æˆ·ç«¯èŠ‚ç‚¹"><a class="header" href="#é›†æˆä¸€ä¸ªè½»å®¢æˆ·ç«¯èŠ‚ç‚¹">é›†æˆä¸€ä¸ªè½»å®¢æˆ·ç«¯èŠ‚ç‚¹</a></h2>
<p>æœ¬èŠ‚æ•™ç¨‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ WebAssembly è½»å®¢æˆ·ç«¯è¿æ¥åˆ°åŸºäº Substrate çš„åŒºå—é“¾ã€‚åœ¨æœ¬èŠ‚æ•™ç¨‹ä¸­ï¼Œä½ å°†ä½¿ç”¨ Substrate Connect æµè§ˆå™¨æ‰©å±•ä¸åŒºå—é“¾äº¤äº’ï¼Œè€Œä¸ä½¿ç”¨ RPC æœåŠ¡ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯substrate-connect"><a class="header" href="#ä»€ä¹ˆæ˜¯substrate-connect">ä»€ä¹ˆæ˜¯Substrate Connect</a></h3>
<p>Substrate Connectæ˜¯ä¸€ä¸ªåŸºäº WebAssembly çš„è½»å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚Substrate Connect light client çš„æ ¸å¿ƒè½¯ä»¶ç»„ä»¶æ˜¯ <a href="https://github.com/paritytech/smoldot/">smoldot</a>ã€‚è¯¥è½¯ä»¶éœ€è¦çš„èµ„æºæ¯”å®Œæ•´èŠ‚ç‚¹æ›´å°‘ï¼Œå› æ­¤å®ƒå¯ä»¥åœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­è¿è¡Œï¼ŒåŒ…æ‹¬æµè§ˆå™¨ã€ç§»åŠ¨ç«¯ç‚¹å’Œç‰©è”ç½‘è®¾å¤‡ã€‚è½»å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è¿æ¥åˆ°ä¸€ä¸ªå®Œæ•´çš„èŠ‚ç‚¹æ¥åŒæ­¥é“¾ä¸­çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä½œä¸ºä¸€ä¸ªè¿è¡Œçš„ peer å¹¶ç›´æ¥è¿æ¥åˆ°åŒºå—é“¾ï¼Œä»¥ä¸ºäº†ç”Ÿäº§åŒºå—æˆ–å¯¼å…¥åŒºå—ã€‚</p>
<h4 id="å®‰å…¨åŒæ­¥"><a class="header" href="#å®‰å…¨åŒæ­¥">å®‰å…¨åŒæ­¥</a></h4>
<p>è½¯ä»¶é’±åŒ…å…è®¸ç”¨æˆ·é€šè¿‡å¯ä¿¡ä»»çš„ä¸­é—´ç¬¬ä¸‰æ–¹èŠ‚ç‚¹æ¥ä¸åŒºå—é“¾äº¤äº’ï¼Œä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œè½»å®¢æˆ·ç«¯ä»å®Œæ•´èŠ‚ç‚¹ä¸‹è½½åŒºå—å¤´ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥ä½¿ç”¨åŒºå—å¤´ä¸­çš„ Merkle trie root æ¥éªŒè¯æ­£åœ¨åŒæ­¥çš„ä¿¡æ¯æ˜¯å¦è¢«ç¯¡æ”¹ã€‚Merkle trie root ä½œä¸ºæ•°æ®æ²¡æœ‰è¢«ä¿®æ”¹çš„åŠ å¯†è¯æ˜ï¼Œè€Œä¸éœ€è¦è½»å®¢æˆ·ç«¯ä¿¡ä»»æ•´ä¸ªèŠ‚ç‚¹ã€‚</p>
<h4 id="substrate-connectä½œä¸ºä¸€ä¸ªæµè§ˆå™¨æ‰©å±•"><a class="header" href="#substrate-connectä½œä¸ºä¸€ä¸ªæµè§ˆå™¨æ‰©å±•">Substrate Connectä½œä¸ºä¸€ä¸ªæµè§ˆå™¨æ‰©å±•</a></h4>
<p>å› ä¸ºè½»å®¢æˆ·ç«¯ä¸å‚ä¸åŒºå—ç”Ÿæˆæˆ–å…±è¯†ï¼Œæ‰€ä»¥å®ƒä»¬ä¸éœ€è¦åœ¨çº¿ï¼Œä¹Ÿä¸éœ€è¦ä¸ç½‘ç»œè¿›è¡ŒæŒç»­é€šä¿¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å°†è½»å®¢æˆ·ç«¯ä½œä¸ºæµè§ˆå™¨æ‰©å±•æ¥è¿è¡Œï¼Œé‚£ä¹ˆä½ å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªè½»å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”åªè¦æµè§ˆå™¨ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¼šè¯ä¸­ä¿æŒåŒæ­¥ã€‚</p>
<p>è¿è¡Œä¸€ä¸ªè½»å®¢æˆ·ç«¯ä½œä¸ºæµè§ˆå™¨æ‰©å±•è¿˜é¿å…äº†å®Œæ•´èŠ‚ç‚¹éœ€è¦çš„ä½¿ç”¨ Transport Layer Securityï¼ˆTLSï¼‰å’Œ Secure Socket Layerï¼ˆSSLï¼‰è¯ä¹¦ã€‚ä½¿ç”¨ Substrate Connectï¼ŒåŒæ­¥åœ¨åå°è¿›è¡Œï¼Œè€Œä¸éœ€è¦é€šè¿‡ WebSocket ç«¯å£ï¼ˆä¸€äº›æµè§ˆå™¨ä¼šå°†å…¶ä½œä¸ºä¸å®‰å…¨è¿æ¥å¹¶é˜»æ­¢ï¼‰ã€‚è¿è¡ŒSubstrate Connect ä½œä¸ºæµè§ˆå™¨æ‰©å±•è¿˜æä¾›äº†æ›´å¥½çš„åº”ç”¨ç¨‹åºæ€§èƒ½å’Œå“åº”æ›´å¿«çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 id="ä½¿ç”¨substrate-connectçš„åº”ç”¨ç¨‹åºå’Œç”¨æˆ·å®è·µ"><a class="header" href="#ä½¿ç”¨substrate-connectçš„åº”ç”¨ç¨‹åºå’Œç”¨æˆ·å®è·µ">ä½¿ç”¨Substrate Connectçš„åº”ç”¨ç¨‹åºå’Œç”¨æˆ·å®è·µ</a></h4>
<p>å¦‚æœä½ ä½¿ç”¨ Substrate Connect æ„å»ºåº”ç”¨ç¨‹åºï¼Œ<code>smoldot</code> å®¢æˆ·ç«¯å¯ä»¥æ£€æµ‹åˆ°ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æµè§ˆå™¨æ‰©å±•ï¼Œå¹¶åœ¨æµè§ˆå™¨æ‰©å±•å¯ç”¨æ—¶è‡ªåŠ¨ä½¿ç”¨è¯¥æ‰©å±•ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰å®‰è£…æµè§ˆå™¨æ‰©å±•ï¼Œ<code>smoldot</code> ä¼šè‡ªåŠ¨åœ¨ä½ çš„ web åº”ç”¨ç¨‹åºä¸­åˆ›å»ºä¸€ä¸ª WebAssembly è½»å®¢æˆ·ç«¯ã€‚è™½ç„¶å°† Substrate Connect ä½œä¸ºæµè§ˆå™¨æ‰©å±•è¿è¡Œæ˜¯å¯é€‰çš„ï¼Œè¯¥æ‰©å±•æä¾›äº†ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ›´å¥½çš„èµ„æºä½¿ç”¨æ•ˆç‡ã€‚å¤šä¸ªæµè§ˆå™¨ tabs å¯ä»¥å…±äº«ä¸€ä¸ªè¿æ¥åˆ°åŒä¸€æ¡é“¾ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨ tabs æˆ–çª—å£æ‰“å¼€è‡ªå·±çš„è¿æ¥ã€‚</li>
<li>æ›´å¥½çš„åŒæ­¥é€Ÿåº¦ã€‚åªè¦æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ tabsï¼Œæµè§ˆå™¨æ‰©å±•å°±è‡ªåŠ¨å¼€å§‹ä¸é“¾åŒæ­¥ï¼Œä¿æŒç¼“å­˜ä»¥ä¾¿è¿æ¥åˆ°é“¾ï¼Œå¯¹äºç”¨æˆ·æ‰“å¼€çš„æ¯ä¸ªæ–°æ ‡ç­¾æˆ–æµè§ˆå™¨çª—å£ï¼ŒåŒæ­¥å‡ ä¹æ˜¯ç¬æ—¶çš„ã€‚å¦‚æœæ²¡æœ‰æµè§ˆå™¨æ‰©å±•ï¼ŒåŒæ­¥ä¸€ä¸ªé“¾å¯èƒ½éœ€è¦10åˆ°30ç§’ã€‚</li>
<li>æ›´å¥½çš„è¿é€šæ€§ã€‚æµè§ˆå™¨æ‰©å±•å¯ä»¥è¿æ¥åˆ°æœªå®‰è£… TLS/SSL è¯ä¹¦çš„èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 id="ä¸‹è½½substrate-connect"><a class="header" href="#ä¸‹è½½substrate-connect">ä¸‹è½½Substrate Connect</a></h3>
<p>ç”±äº Substrate Connect æµè§ˆå™¨æ‰©å±•æä¾›çš„ä¼˜åŠ¿ï¼Œç¬¬ä¸€æ­¥é¦–å…ˆéœ€è¦å®‰è£…æµè§ˆå™¨æ‰©å±•ã€‚</p>
<ol>
<li>ä½¿ç”¨ Chrome æˆ– Firefox æ‰“å¼€é“¾æ¥ https://substrate.io/developers/substrate-connect/ã€‚</li>
<li>ç‚¹å‡» <a href="https://chrome.google.com/webstore/detail/substrate-connect-extensi/khccbhhbocaaklceanjginbdheafklai">Chrome</a> æˆ– <a href="https://addons.mozilla.org/en-US/firefox/addon/substrate-connect/">Firefox</a>ã€‚</li>
<li>ç‚¹å‡» <strong>Add to Chrome</strong> æˆ– <strong>Add to Firefox</strong>ï¼Œç„¶åç¡®è®¤ä½ æƒ³è¦å°†æ‰©å±•æ·»åŠ åˆ°æµè§ˆå™¨ã€‚</li>
</ol>
<h3 id="è¿æ¥åˆ°ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é“¾"><a class="header" href="#è¿æ¥åˆ°ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é“¾">è¿æ¥åˆ°ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é“¾</a></h3>
<p>åœ¨ Substrate Connect è½»å®¢æˆ·ç«¯å¯ä»¥è¿æ¥åˆ°ç½‘ç»œä¹‹å‰ï¼Œä½ å¿…é¡»æœ‰ä¸€ä¸ª web åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºæŒ‡å®šäº†è¯·å®¢æˆ·ç«¯åº”è¯¥è¿æ¥åˆ°çš„ç½‘ç»œï¼Œç”¨äºé€šä¿¡çš„èŠ‚ç‚¹ï¼Œä»¥åŠå®ƒåœ¨åˆå§‹é˜¶æ®µå¿…é¡»å…·æœ‰çš„å…±è¯†ä¸´ç•ŒçŠ¶æ€ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥åœ¨ç½‘ç»œçš„ chain specification æ–‡ä»¶ä¸­è·å¾—ã€‚</p>
<p>Substrate Connect é¢„å…ˆé…ç½®ä¸ºè¯†åˆ«åœ¨ <a href="https://paritytech.github.io/substrate-connect/api/enums/connect_src.WellKnownChain.html">WellKnownChain</a> åˆ—è¡¨ä¸­å®šä¹‰çš„å‡ ä¸ªé“¾ï¼Œè¿™äº›çŸ¥åçš„é“¾æ˜¯ï¼š</p>
<ul>
<li>Polkadot è¢«è¯†åˆ«ä¸º <code>polkadot</code></li>
<li>Kusama è¢«è¯†åˆ«ä¸º <code>ksmcc3</code></li>
<li>Rococo è¢«è¯†åˆ«ä¸º <code>rococo_v2_2</code></li>
<li>Westend è¢«è¯†åˆ«ä¸º <code>westend2</code></li>
</ul>
<p>è¦è¿æ¥åˆ°è¿™äº›é“¾ä¹‹ä¸€ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å…‹éš† <code>empty-webapp</code> æ¨¡æ¿ï¼Œåˆ›å»ºä½¿ç”¨ Substrate Connect çš„ web åº”ç”¨ï¼š</p>
<pre><code class="language-bash editable noplayground">git clone https://github.com/bernardoaraujor/empty-webapp

cd empty-webapp

# é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æ¥è‡ª Polkadot-JS RPC æä¾›çš„ä¾èµ–é¡¹
yarn add @polkadot/rpc-provider

# é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Polkadot-JS API ä¸­çš„ä¾èµ–é¡¹
yarn add @polkadot/api
</code></pre>
<p>å®‰è£…è¿™äº›ä¾èµ–é¡¹ä¹‹åï¼Œå°±å¯ä»¥åœ¨ç¤ºä¾‹åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ <code>empty-webapp/index.ts</code> æ–‡ä»¶ï¼Œå¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹åº”ç”¨ç¨‹åºä»£ç ï¼Œä½¿ç”¨ <code>substrate-connect</code> ä½œä¸ºæä¾›ä»¥åˆ›å»ºä¸€ä¸ª Substrate Connect å®ä¾‹ï¼Œä½¿ç”¨ <code>polkadot</code> chain specification æ–‡ä»¶è¿æ¥åˆ° <code>Polkadot</code> ä¸­ç»§é“¾ã€‚</p>
<pre><code class="language-javascript editable noplayground">import {
  ScProvider,
  WellKnownChain,
} from &quot;@polkadot/rpc-provider/substrate-connect&quot;;
import { ApiPromise } from &quot;@polkadot/api&quot;;

window.onload = () =&gt; {
  void (async () =&gt; {
    try {
      const provider = new ScProvider(WellKnownChain.polkadot);
      
      await provider.connect();
      const api = await ApiPromise.create({ provider });
      await api.rpc.chain.subscribeNewHeads(
        (lastHeader: { number: unknown; hash: unknown }) =&gt; {
          console.log(
            `New block #${lastHeader.number} has hash ${lastHeader.hash}`
          );
        }
      );
    } catch (error) {
      console.error(&lt;Error&gt;error);
    }
  })();
};
</code></pre>
<p>åœ¨ Polkadot-JS API ä¸­ï¼Œä½ å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼š</p>
<pre><code class="language-javascript editable noplayground">// Import
import { ApiPromise, WsProvider } from '@polkadot/api';

// Construct
const wsProvider = new WsProvider('wss://rpc.polkadot.io');
const api = await ApiPromise.create({ provider: wsProvider });
</code></pre>
<p>å¯¹äº Substrate Connectï¼Œä½ å°† WebSocketï¼ˆ<code>WsProvider</code>ï¼‰provider æ›¿æ¢ä¸º Substrate Connectï¼ˆ<code>ScProvider</code>ï¼‰ï¼Œå¹¶æŒ‡å®š Polkadot ç½‘ç»œï¼ˆ<code>WellKnownChain.polkadot</code>ï¼‰çš„ chain specificationï¼Œè€Œä¸æ˜¯ WebSocket URL å®¢æˆ·ç«¯åœ°å€ã€‚</p>
<p>é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä»»ä½•å‰©ä½™çš„ä¾èµ–é¡¹ï¼š</p>
<pre><code class="language-bash editable noplayground">yarn
</code></pre>
<p>é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ web åº”ç”¨ç¨‹åºï¼š</p>
<pre><code class="language-bash editable noplayground">yarn dev
</code></pre>
<p>å¦‚æœåœ¨å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨æ—¶å‡ºç°ç¼–è¯‘å™¨é”™è¯¯ï¼Œä½ å¯èƒ½ä¼šç¼ºå°‘å½“å‰ <code>yarn</code> é…ç½®ä¸­æ²¡æœ‰è€ƒè™‘åˆ°çš„ä¾èµ–ã€‚å¦‚æœç¼ºå°‘ä¾èµ–é¡¹ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œç±»ä¼¼ä»¥ä¸‹çš„å‘½ä»¤æ·»åŠ ä¾èµ–åŒ…ï¼š</p>
<pre><code class="language-bash editable noplayground">yarn add -D buffer
</code></pre>
<p>æ‰“å¼€ URL <code>http://localhost:3001/</code> éªŒè¯æµè§ˆå™¨ã€‚</p>
<p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ã€‚æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°çš„æ–¹æ³•å–å†³äºæ‰€ä½¿ç”¨çš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿ,ä¾‹å¦‚ï¼Œåœ¨ Chrome ä¸Šï¼Œé€‰æ‹©æ›´å¤šå·¥å…·ï¼Œå¼€å‘äººå‘˜å·¥å…·ï¼Œç„¶åå•å‡»æ§åˆ¶å°ã€‚</p>
<p>éªŒè¯ <code>smoldot</code> è¿›ç¨‹å·²åˆå§‹åŒ–ï¼Œç„¶åæ˜¯æ¥è‡ª Polkadot ä¼ å…¥å—çš„å“ˆå¸Œå€¼ã€‚ä¾‹å¦‚ï¼Œæ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºç±»ä¼¼å¦‚ä¸‹çš„æ—¥å¿—ä¿¡æ¯ï¼š</p>
<pre><code class="language-bash editable noplayground">[smoldot] Smoldot v0.6.25
smoldot-light.js:41 [smoldot] Chain initialization complete for polkadot. Name: &quot;Polkadot&quot;. Genesis hash: 0x91b1â€¦90c3. State root hash: 0x29d0d972cd27cbc511e9589fcb7a4506d5eb6a9e8df205f00472e5ab354a4e17. Network identity: 12D3KooWRse9u6Z9ukP4C92YCCH2gXziNm8ThRch2owaaFh9H6D1. Chain specification or database starting at: 0xae3eâ€¦f81d (#11228238)
...
New block #11322769 has hash 0x464c0199ede92a89920c54c21abc741ea47daca1d62d61d7b9af78062f04c7a3 index.ts:10 
New block #11322770 has hash 0xd66c61e5417249df228798f38535a6dd17b8b268c165e0a6b0e72ba74e954f9d index.ts:10
</code></pre>
<p>è¿™ä¸ªç®€å•çš„ web åº”ç”¨ç¨‹åºåªè¿æ¥åˆ° Polkadot æ£€ç´¢å—å“ˆå¸Œå€¼ã€‚æ­¤åº”ç”¨ç¨‹åºçš„ä¸»è¦ç›®çš„æ˜¯æ¼”ç¤ºåœ¨ä¸ä½¿ç”¨ä¸­å¿ƒåŒ–çš„ç½‘ç»œå…¥å£ç‚¹ï¼ˆä¾‹å¦‚ç‰¹å®š RPC èŠ‚ç‚¹çš„ URLï¼‰çš„æƒ…å†µä¸‹è¿æ¥åˆ°é“¾ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥æ‰©å±•è¿™ä¸ªåº”ç”¨ç¨‹åºæ¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œå› ä¸ºåœ¨ä½ å°† <code>WsProvider</code> æ›¿æ¢ä¸º <code>ScProvider</code> ä¹‹åï¼Œä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨ç°æœ‰çš„<a href="https://polkadot.js.org/docs/">Polkadot-JS API</a> ä¸ºä½ çš„åº”ç”¨ç¨‹åºç¼–å†™ä»£ç ã€‚</p>
<p>æŒ‰ Control-c åœæ­¢ <code>smoldot</code> è½»å®¢æˆ·ç«¯èŠ‚ç‚¹ã€‚</p>
<h3 id="è¿æ¥åˆ°è‡ªå®šä¹‰chain-specification"><a class="header" href="#è¿æ¥åˆ°è‡ªå®šä¹‰chain-specification">è¿æ¥åˆ°è‡ªå®šä¹‰chain specification</a></h3>
<p>è¿æ¥åˆ°è‡ªå®šä¹‰ chain specification æˆ–å…¬å…±å¯è®¿é—®çš„å¹³è¡Œé“¾ç±»ä¼¼äºè¿æ¥åˆ° well-known çš„é“¾ä¹‹ä¸€ã€‚ä»£ç ä¸­çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå¿…é¡»æ˜¾å¼åœ°æ ‡è¯†è¦ä½¿ç”¨çš„ Substrate Connect çš„ chain specificationã€‚è¿™éƒ¨åˆ†æ•™ç¨‹æ¼”ç¤ºå¦‚ä½•é€šè¿‡è¿æ¥åˆ° Statemint å¹³è¡Œé“¾æ¥è¿æ¥åˆ°è‡ªå®šä¹‰ chain specificationã€‚Statemint æ˜¯ä¸€ä¸ªè¿æ¥åˆ° Polkadot çš„é€šç”¨è‰¯å¥½çš„å¹³è¡Œé“¾ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå…¬å¼€çš„ chain specification æ–‡ä»¶ã€‚</p>
<p>è¦è¿æ¥åˆ°è¿™ä¸ªé“¾ï¼Œä» <a href="https://github.com/paritytech/cumulus/blob/master/parachains/chain-specs/statemint.json">cumulus repository</a> ä¸‹è½½å®šåˆ¶ chain specification æ–‡ä»¶ã€‚å°†ä¸‹è½½çš„ chain specification å¤åˆ¶åˆ°ä½ åœ¨<a href="#%E8%BF%9E%E6%8E%A5%E5%88%B0%E4%B8%80%E4%B8%AA%E4%BC%97%E6%89%80%E5%91%A8%E7%9F%A5%E7%9A%84%E9%93%BE"><strong>è¿æ¥åˆ°ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é“¾</strong></a>ä¸­åˆ›å»ºçš„<code>empty-webapp</code> ç›®å½•ã€‚</p>
<p>åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ <code>index.ts</code> æ–‡ä»¶ï¼Œåˆ é™¤å½“å‰å†…å®¹ã€‚å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹åº”ç”¨ç¨‹åºä»£ç ï¼š</p>
<pre><code class="language-javascript editable noplayground">import { ScProvider, WellKnownChain } from &quot;@polkadot/rpc-provider/substrate-connect&quot;;import { ApiPromise } from &quot;@polkadot/api&quot;;
import jsonParachainSpec from &quot;./statemint.json&quot;;

window.onload = () =&gt; {
void (async () =&gt; {
  try {
    const relayProvider = new ScProvider(WellKnownChain.polkadot);
    const parachainSpec = JSON.stringify(jsonParachainSpec);
    const provider = new ScProvider(parachainSpec, relayProvider);
    
    await provider.connect();
    const api = await ApiPromise.create({ provider });
    await api.rpc.chain.subscribeNewHeads((lastHeader: { number: unknown; hash: unknown }) =&gt; {
      console.log(`New block #${lastHeader.number} has hash ${lastHeader.hash}`);
    });
  } catch (error) {
    console.error(&lt;Error&gt;error);
  }
})();
};
</code></pre>
<p>æ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œè¿™æ®µä»£ç æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚</p>
<ul>
<li><code>statemint.json</code> chain specification æ–‡ä»¶å¯¼å…¥åˆ° <code>jsonParachainSpec</code> å¯¹è±¡ä¸­ã€‚</li>
<li>chain specification è¢«è½¬æ¢ä¸ºä¸€ä¸ª JSON-encoded çš„å­—ç¬¦ä¸²ï¼Œå¹¶å­˜å‚¨åœ¨ <code>parachainSpec</code> å˜é‡ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ä¸ web æœåŠ¡å™¨äº¤æ¢ã€‚</li>
</ul>
<p><code>ScProvider</code> provider æ˜¯ä¸º <code>polkadot</code> ä¸­ç»§é“¾åˆ›å»ºçš„ï¼Œä½†å®ƒè¢«ç”¨ä½œåˆ›å»ºå’Œè¿æ¥åˆ°å¹³è¡Œé“¾ provider çš„å‚æ•°ã€‚Substrate Connect éœ€è¦æ­¤ä¿¡æ¯æ¥ç¡®å®šä¸å¹³è¡Œé“¾é€šä¿¡çš„ä¸­ç»§é“¾ã€‚</p>
<p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨ web åº”ç”¨ç¨‹åº</p>
<pre><code class="language-bash editable noplayground">yarn dev
</code></pre>
<p>æ‰“å¼€ URL <code>http://localhost:3001/</code> éªŒè¯æµè§ˆå™¨ã€‚åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ§åˆ¶å°ã€‚</p>
<p>éªŒè¯ <code>smoldot</code> è¿›ç¨‹å·²åˆå§‹åŒ–ï¼Œç„¶åæ˜¯æ¥è‡ª Polkadot ä¼ å…¥å—çš„å“ˆå¸Œå€¼ã€‚ä¾‹å¦‚ï¼Œæ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºç±»ä¼¼å¦‚ä¸‹çš„æ—¥å¿—ä¿¡æ¯ï¼š</p>
<pre><code class="language-bash editable noplayground">[smoldot] Parachain initialization complete for statemint. Name: &quot;Statemint&quot;. Genesis hash: 0x68d5â€¦de2f. State root hash: 0xc1ef26b567de07159e4ecd415fbbb0340c56a09c4d72c82516d0f3bc2b782c80. Network identity: 12D3KooWArq3iZHdK2jtRZSJzJkkWrKm17JTa9kjwjZkq9Htx5xR. Relay chain: polkadot (id: 1000 smoldot-light.js:41 
[smoldot] Smoldot v0.6.25. Current memory usage: 140 MiB. Average download: 35.4 kiB/s. Average upload: 423 B/s.
New block #1785421 has hash 0x88885ed331f94b4324c5f2eae8413cd36170808ef904b0ec0867646fa53770f7 index.ts:13 
New block #1785422 has hash 0x2ad4d96e061a681e27403694f1d870bb0c4e5c77b5be232a18c7a2e0b7fb2555 index.ts:13 
</code></pre>
<h3 id="é«˜çº§åº”ç”¨ç¨‹åºå¼€å‘"><a class="header" href="#é«˜çº§åº”ç”¨ç¨‹åºå¼€å‘">é«˜çº§åº”ç”¨ç¨‹åºå¼€å‘</a></h3>
<p>æœ¬èŠ‚æ•™ç¨‹ä¸­çš„ç¤ºä¾‹ä½¿ç”¨äº† <code>@polkadot/rpc-provider/substrate-connect</code>ï¼Œå› ä¸ºè¯¥ provider å¯ä»¥ç›´æ¥åˆ›å»ºä½¿ç”¨ <a href="https://polkadot.js.org/docs/">Polkadot-JS API</a> ä¸é“¾è¿›è¡Œäº¤äº’çš„åº”ç”¨ç¨‹åºã€‚å¯¹äºä¸ä¾èµ– Polkadot-JS API çš„æ›´é«˜çº§åº”ç”¨ç¨‹åºå¼€å‘ï¼Œä½ å¯ä»¥å®‰è£…å¹¶ä½¿ç”¨ <code>@substrate-connect</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨æ„å»ºè‡ªå·±çš„åº”ç”¨ç¨‹åºåº“æˆ–ç¼–ç¨‹æ¥å£ï¼Œåˆ™åº”é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Substrate Connect ä¾èµ–é¡¹ï¼š</p>
<pre><code class="language-bash editable noplayground">yarn add @substrate/connect
</code></pre>
<h2 id="è®¿é—®evmè´¦æˆ·"><a class="header" href="#è®¿é—®evmè´¦æˆ·">è®¿é—®EVMè´¦æˆ·</a></h2>
<p>æœ¬èŠ‚æ•™ç¨‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <a href="https://github.com/paritytech/frontier">Frontier</a> é¡¹ç›®ä¸­çš„ crates æ¥æ„å»ºä¸€ä¸ªä¸<strong>ä»¥å¤ªåŠå…¼å®¹</strong>çš„åŒºå—é“¾ï¼Œè¯¥åŒºå—é“¾å¯ä»¥è®¿é—®åŸºäºä»¥å¤ªåŠçš„å¸æˆ·å¹¶æ‰§è¡ŒåŸºäº Solidity çš„æ™ºèƒ½åˆçº¦ã€‚Frontier é¡¹ç›®çš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯ä½¿ä½ èƒ½å¤Ÿæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>ä½¿ç”¨æœ¬åœ° Substrate èŠ‚ç‚¹ä¸åŠ ä¿®æ”¹åœ°è¿è¡Œä»¥å¤ªåŠå»ä¸­å¿ƒåŒ–åº”ç”¨ã€‚</li>
<li>ä»ä»¥å¤ªåŠä¸»ç½‘ç»œå¯¼å…¥çŠ¶æ€</li>
</ul>
<p>æœ¬èŠ‚æ•™ç¨‹ä½¿ç”¨é¢„å®šä¹‰çš„èŠ‚ç‚¹æ¨¡æ¿æä¾›çš„å·¥ä½œç¯å¢ƒã€‚æ¨¡æ¿æ˜¯ä½¿ç”¨ <a href="https://github.com/paritytech/frontier/blob/master/docs/node-template-release.md">Frontier release guide</a> ä¸­çš„è¯´æ˜ç”Ÿæˆçš„ã€‚</p>
<p>å¦‚æœéœ€è¦ä¸ºè‡ªå·±ç”Ÿæˆç‹¬ç«‹çš„æ¨¡æ¿ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/paritytech/frontier/blob/master/.maintain/node-template-release.sh">node-template-release.sh</a> æ¨¡æ¿ç”Ÿæˆè„šæœ¬ã€‚å¦‚æœä½ ä½¿ç”¨ <a href="https://github.com/paritytech/frontier">frontier</a> ä»“åº“æˆ–æ¨¡æ¿ç”Ÿæˆè„šæœ¬æ„å»ºè‡ªå·±çš„èŠ‚ç‚¹ï¼Œè¯·æ³¨æ„ frontier ä½¿ç”¨è‡ªå·±ç‰ˆæœ¬çš„ Substrate cratesï¼Œä½ å¯èƒ½éœ€è¦æ›´æ–° <code>Cargo</code> æ–‡ä»¶ä¸­çš„ä¾èµ–ï¼Œä»¥åŒ¹é…é¡¹ç›®ä¸­çš„ä¾èµ–ã€‚</p>
<h3 id="åˆ›ä¸–é…ç½®"><a class="header" href="#åˆ›ä¸–é…ç½®">åˆ›ä¸–é…ç½®</a></h3>
<p><code>frontier-node-template</code> ä¸­çš„å¼€å‘ chain specification å®šä¹‰äº†ä¸€ä¸ªåˆ›ä¸–å—ï¼Œè¯¥å—å·²ç»ä¸º <code>alice</code> å¸æˆ·é¢„é…ç½®äº†ä¸€ä¸ª EVM å¸æˆ·ã€‚å½“ä½ åœ¨å¼€å‘æ¨¡å¼ä¸­å¯åŠ¨è¯¥èŠ‚ç‚¹æ—¶ï¼Œ<code>alice</code> çš„ EVM å¸æˆ·å°†ä½¿ç”¨é»˜è®¤çš„ Ether èµ„é‡‘é¢åº¦ã€‚ä½ å°†ä½¿ç”¨è¯¥å¸æˆ·æŸ¥çœ‹ EVM å¸æˆ·è¯¦ç»†ä¿¡æ¯å¹¶è°ƒç”¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ã€‚å¯åŠ¨èŠ‚ç‚¹åï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> æŸ¥çœ‹` çš„ EVM å¸æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 id="ç¼–è¯‘ä¸€ä¸ªfrontierèŠ‚ç‚¹"><a class="header" href="#ç¼–è¯‘ä¸€ä¸ªfrontierèŠ‚ç‚¹">ç¼–è¯‘ä¸€ä¸ªFrontierèŠ‚ç‚¹</a></h3>
<p>è¦ç¼–è¯‘ <a href="https://github.com/substrate-developer-hub/frontier-node-template">Frontier node template</a>ï¼Œé€šè¿‡è¿è¡Œä¸€ä¸‹å‘½ä»¤å…‹éš† node template ä»“åº“ï¼Œå¹¶ç¼–è¯‘ node templateï¼š</p>
<pre><code class="language-bash editable noplayground">git clone https://github.com/substrate-developer-hub/frontier-node-template.git

cd frontier-node-template

cargo build --release
</code></pre>
<h3 id="è¿æ¥åˆ°èŠ‚ç‚¹"><a class="header" href="#è¿æ¥åˆ°èŠ‚ç‚¹">è¿æ¥åˆ°èŠ‚ç‚¹</a></h3>
<p>åœ¨èŠ‚ç‚¹ç¼–è¯‘åï¼Œå¿…é¡»å¯åŠ¨è¯¥èŠ‚ç‚¹æ‰èƒ½å¼€å§‹ç ”ç©¶é¢„å…ˆé…ç½®çš„ EVM å¸æˆ·ã€‚</p>
<p>è¦å¯åŠ¨æœ¬åœ° Substrate èŠ‚ç‚¹ï¼Œåœ¨ <code>frontier-node-template</code> ç›®å½•ä¸‹ï¼Œè¿è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-bash editable noplayground">./target/release/frontier-template-node --dev
</code></pre>
<p><code>--dev</code> å‘½ä»¤è¡Œé€‰é¡¹æŒ‡å®šèŠ‚ç‚¹ä½¿ç”¨é¢„å®šä¹‰çš„ <code>development</code> chain specification è¿è¡Œï¼Œè¯¥ chain specification åŒ…æ‹¬ <code>alice</code> é¢„å®šä¹‰çš„ EVM å¸æˆ·å’Œç”¨äºæµ‹è¯•çš„å…¶ä»–å¸æˆ·ã€‚</p>
<p>é€šè¿‡æ£€æŸ¥ç»ˆç«¯ä¸­æ˜¾ç¤ºçš„è¾“å‡ºï¼ŒéªŒè¯ä½ çš„èŠ‚ç‚¹å·²æˆåŠŸå¯åŠ¨å¹¶è¿è¡Œï¼Œç»ˆç«¯åº”è¯¥æ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="language-bash editable noplayground">2022-07-08 10:06:42 Frontier Node
2022-07-08 10:06:42 âœŒï¸  version 0.0.0-1b6bff4-x86_64-macos
2022-07-08 10:06:42 â¤ï¸  by Substrate DevHub &lt;https://github.com/substrate-developer-hub&gt;, 2021-2022
2022-07-08 10:06:42 ğŸ“‹ Chain specification: Development
2022-07-08 10:06:42 ğŸ·  Node name: flippant-boat-0444
2022-07-08 10:06:42 ğŸ‘¤ Role: AUTHORITY
...
</code></pre>
<p>ä½¿ç”¨ <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> è¿æ¥æœ¬åœ°èŠ‚ç‚¹ã€‚</p>
<p>ç‚¹å‡» <strong>Settings</strong>ï¼Œç„¶åç‚¹å‡» <strong>Developer</strong>
<img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subsetdev.jpg" alt="" /></p>
<p>å®šä¹‰ä»¥ä¸‹å¸æˆ·ä¿¡æ¯æ¥åˆ›å»ºä¸€ä¸ª EVM <code>Account</code> ç±»å‹ï¼Œå¹¶å…è®¸è¯¥å¸æˆ·å‘é€äº¤æ˜“å’Œæ£€æŸ¥åŒºå—ã€‚è¦å‘é€äº¤æ˜“ï¼Œä½ å¿…é¡»å®šä¹‰ <code>Address</code> å’Œ <code>LookupSource</code> çš„å€¼ã€‚è¦æ£€æŸ¥åŒºå—ï¼Œä½ å¿…é¡»å®šä¹‰ <code>Transaction</code> å’Œ <code>Signature</code> çš„å€¼ã€‚</p>
<pre><code class="language-json editable noplayground">{
  &quot;Address&quot;: &quot;MultiAddress&quot;,
  &quot;LookupSource&quot;: &quot;MultiAddress&quot;,
  &quot;Account&quot;: {
     &quot;nonce&quot;: &quot;U256&quot;,
     &quot;balance&quot;: &quot;U256&quot;
  },
  &quot;Transaction&quot;: {
     &quot;nonce&quot;: &quot;U256&quot;,
     &quot;action&quot;: &quot;String&quot;,
     &quot;gas_price&quot;: &quot;u64&quot;,
     &quot;gas_limit&quot;: &quot;u64&quot;,
     &quot;value&quot;: &quot;U256&quot;,
     &quot;input&quot;: &quot;Vec&lt;u8&gt;&quot;,
     &quot;signature&quot;: &quot;Signature&quot;
  },
  &quot;Signature&quot;: {
     &quot;v&quot;: &quot;u64&quot;,
     &quot;r&quot;: &quot;H256&quot;,
     &quot;s&quot;: &quot;H256&quot;
  }
}
</code></pre>
<p>ç‚¹å‡»ä¿å­˜</p>
<h3 id="ä½¿ç”¨rpcæŸ¥è¯¢ä½™é¢"><a class="header" href="#ä½¿ç”¨rpcæŸ¥è¯¢ä½™é¢">ä½¿ç”¨RPCæŸ¥è¯¢ä½™é¢</a></h3>
<p>åœ¨ä¸º EVM å¸æˆ·é…ç½®å¯¹åº”çš„è®¾ç½®åï¼Œå¯ä»¥ä½¿ç”¨ Polkadot-JS åº”ç”¨ç¨‹åºæŸ¥çœ‹ <code>alice</code> çš„ EVM å¸æˆ·ä¿¡æ¯ã€‚</p>
<ol>
<li>éªŒè¯ä½ çš„èŠ‚ç‚¹ä»åœ¨è¿è¡Œï¼Œå¹¶ä¸” Polkadot-JS åº”ç”¨ç¨‹åºå·²è¿æ¥åˆ°è¯¥èŠ‚ç‚¹ã€‚</li>
<li>ç‚¹å‡» <strong>Developer</strong>ï¼Œç„¶åé€‰æ‹© <strong>RPC calls</strong>ã€‚</li>
<li>åœ¨ <strong>Submission</strong> é€‰é¡¹å¡ä¸Šï¼Œé€‰æ‹© <strong>eth</strong> ä½œä¸ºè¦è°ƒç”¨çš„ç«¯ç‚¹ã€‚</li>
<li>ä»è¦è°ƒç”¨çš„å‡½æ•°åˆ—è¡¨ä¸­é€‰æ‹© <strong>getBalance(address, number)</strong>ã€‚</li>
<li>ä¸º <code>alice</code> å¸æˆ·çš„åœ°å€æŒ‡å®š EVM å¸æˆ·æ ‡è¯†ç¬¦ã€‚
é¢„å®šä¹‰è´¦æˆ·åœ°å€ä¸º <code>0xd43593c715fdd31c61141abd04a99fd6822c8558</code>ã€‚å¸æˆ·çš„åœ°å€æ˜¯ä½¿ç”¨ <a href="https://github.com/substrate-developer-hub/frontier-node-template/tree/main/utils/README.md#--evm-address-address">Substrate EVM utilities</a> ä» <code>alice</code> å¸æˆ·çš„å…¬é’¥è®¡ç®—å‡ºæ¥çš„ã€‚</li>
<li>ç‚¹å‡» <strong>Submit RPC call</strong>ï¼Œè¯¥è°ƒç”¨åº”è¯¥è¿”å›å¦‚ä¸‹ç±»ä¼¼çš„è¾“å‡ºï¼š</li>
</ol>
<pre><code class="language-bash editable noplayground">2: eth.getBalance: U256
340,282,366,920,938,463,463,374,607,431,768,210,955
</code></pre>
<h3 id="éƒ¨ç½²ä¸€ä¸ªæ™ºèƒ½åˆçº¦"><a class="header" href="#éƒ¨ç½²ä¸€ä¸ªæ™ºèƒ½åˆçº¦">éƒ¨ç½²ä¸€ä¸ªæ™ºèƒ½åˆçº¦</a></h3>
<p>ç°åœ¨ä½ å·²ç»äº†è§£äº†å¦‚ä½•æŸ¥è¯¢ä»¥å¤ªåŠåœ°å€çš„ä½™é¢ï¼Œä½ å¯èƒ½è¿˜æƒ³æ¢ç´¢å¦‚ä½•éƒ¨ç½²å’Œè°ƒç”¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¹¶æµ‹è¯•ç›¸å…³åŠŸèƒ½ã€‚è¿™éƒ¨åˆ†å†…å®¹ä¼šä½¿ç”¨ä¸€ä¸ª <a href="https://www.trufflesuite.com/truffle">Truffle</a> ç¤ºä¾‹åˆçº¦æ¥å®šä¹‰ <a href="https://github.com/substrate-developer-hub/frontier-node-template/blob/main/examples/contract-erc20/truffle/contracts/MyToken.sol">ERC-20 token</a>ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Polkadot JS SDK å’Œ <a href="https://github.com/substrate-developer-hub/frontier-node-template/tree/main/examples/contract-erc20">Typescript</a> åˆ›å»ºä¸€ä¸ª ERC-20 token åˆçº¦ã€‚</p>
<p>åˆ›å»º ERC-20 åˆçº¦ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/substrate-developer-hub/frontier-node-template/blob/main/examples/contract-erc20/truffle/contracts/MyToken.json">MyToken.json</a> ä¸­çš„ token åˆçº¦ç¼–è¯‘çš„ <code>bytecode</code>ï¼Œç„¶åå°†åˆçº¦éƒ¨ç½²åˆ° Substrate åŒºå—é“¾ä¸Šã€‚</p>
<p>éªŒè¯ä½ çš„èŠ‚ç‚¹ä»åœ¨è¿è¡Œï¼Œå¹¶ä¸” <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> å·²è¿æ¥åˆ°è¯¥èŠ‚ç‚¹ã€‚</p>
<p>ç‚¹å‡» <strong>Developer</strong>ï¼Œç„¶åé€‰æ‹© <strong>Extrinsics</strong>ã€‚</p>
<p>é€‰æ‹© <strong>ALICE</strong> å¼€å‘å¸æˆ·ä½œä¸ºç”¨äºæäº¤äº¤æ˜“çš„å¸æˆ·ã€‚</p>
<p>é€‰æ‹© <strong>evm</strong>ã€‚</p>
<p>é€‰æ‹© <strong>create</strong> å‡½æ•°ã€‚</p>
<p>é…ç½®è¯¥å‡½æ•°çš„å‚æ•°ï¼š
|<strong>For this</strong>|<strong>Specify this</strong>|
|:-----|:-----|
|<code>source</code>|0xd43593c715fdd31c61141abd04a99fd6822c8558|
|<code>init</code>|<code>MyToken.json</code> ä¸­çš„åŸå§‹ <code>bytecode</code> åå…­è¿›åˆ¶å€¼|
|<code>value</code>|0|
|<code>gasLimit</code>|4294967295|
|<code>maxFeePerGas</code>|100000000|</p>
<p>ä½ å¯ä»¥å°†å¯é€‰å‚æ•°ä¿ç•™ä¸ºç©ºï¼Œ<code>nonce</code> çš„å€¼å°†å¢åŠ æºå¸æˆ·çš„å·²çŸ¥ nonce å€¼ï¼Œå¹¶ä» <code>0x0</code> å¼€å§‹ã€‚æ ¹æ®æ‰€é€‰å‡½æ•°çš„ä¸åŒï¼Œä½ å¯èƒ½éœ€è¦åˆ é™¤æœªä½¿ç”¨çš„å‚æ•°ã€‚</p>
<p>ç‚¹å‡» <strong>Submit Transaction</strong>ã€‚</p>
<p>ç‚¹å‡» <strong>Sign and Submit</strong> å¯¹äº¤æ˜“è¿›è¡Œæˆæƒã€‚</p>
<h3 id="æŸ¥çœ‹æ™ºèƒ½åˆçº¦"><a class="header" href="#æŸ¥çœ‹æ™ºèƒ½åˆçº¦">æŸ¥çœ‹æ™ºèƒ½åˆçº¦</a></h3>
<p>æäº¤äº¤æ˜“åï¼Œåˆçº¦å°†éƒ¨ç½²åˆ°ç½‘ç»œä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> æŸ¥çœ‹æœ‰å…³å®ƒçš„ä¿¡æ¯ã€‚</p>
<p>éªŒè¯ä½ çš„èŠ‚ç‚¹ä»åœ¨è¿è¡Œï¼Œå¹¶ä¸” <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> å·²è¿æ¥åˆ°è¯¥èŠ‚ç‚¹ã€‚</p>
<p>ç‚¹å‡» <strong>Network</strong>ï¼Œç„¶åé€‰æ‹© <strong>Explorer</strong>ã€‚</p>
<p>ç‚¹å‡» <strong>evm.Created</strong> äº‹ä»¶ä»¥éªŒè¯æ–°åˆ›å»ºçš„åˆçº¦çš„åœ°å€ä¸º <code>0x8a50db1e0f9452cfd91be8dc004ceb11cb08832f</code>ã€‚
<img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subevmcre.jpg" alt="" /></p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘äººå‘˜å·¥å…·ä¸­çš„æ§åˆ¶å°æŸ¥çœ‹æœ‰å…³äº‹åŠ¡çš„è¯¦ç»†ä¿¡æ¯ã€‚å› ä¸ºEVMåˆåŒåœ°å€æ˜¯ç”±å¸æˆ·æ ‡è¯†ç¬¦å’ŒåˆåŒåˆ›å»ºè€…çš„nonceå†³å®šçš„ï¼Œæ‰€ä»¥éƒ¨ç½²åˆåŒçš„åœ°å€æ˜¯ä½¿ç”¨ä¼—æ‰€å‘¨çŸ¥çš„å¸æˆ·æ ‡è¯†ç¬¦0xd43593c715fdd31c61141abd04a99fd6822c8558å’Œaliceå¸æˆ·çš„nonce 0x0è®¡ç®—çš„ã€‚</p>
<p>ç‚¹å‡» <strong>Developer</strong>ï¼Œç„¶åé€‰æ‹© <strong>Chain State</strong>ã€‚</p>
<p>é€‰æ‹© <strong>evm</strong> ä½œä¸ºæŸ¥è¯¢å’Œ <strong>accountCodes</strong> çš„çŠ¶æ€ã€‚</p>
<p>ä¸º <code>alice</code> å¸æˆ·æŒ‡å®šå¸æˆ·æ ‡è¯†ç¬¦ <code>0xd43593c715fdd31c61141abd04a99fd6822c8558</code>ï¼Œæ³¨æ„å¸æˆ·ä»£ç ä¸ºç©ºï¼ˆ<code>0x</code>ï¼‰ã€‚</p>
<p>ä¸ºä½ ä½¿ç”¨ <code>alice</code> å¼€å‘å¸æˆ·éƒ¨ç½²çš„åˆçº¦æŒ‡å®šåˆçº¦åœ°å€ <code>0x8a50db1e0f9452cfd91be8dc004ceb11cb08832f</code>ï¼Œæ³¨æ„åˆçº¦å¸æˆ·ä»£ç æ˜¯æ¥è‡ª Solidity åˆçº¦çš„å­—èŠ‚ç ã€‚</p>
<h3 id="æŸ¥çœ‹è´¦æˆ·å­˜å‚¨"><a class="header" href="#æŸ¥çœ‹è´¦æˆ·å­˜å‚¨">æŸ¥çœ‹è´¦æˆ·å­˜å‚¨</a></h3>
<p>ä½ éƒ¨ç½²çš„ ERC-20 åˆçº¦æ˜¯åŸºäº <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol">OpenZeppelin ERC-20 implementation</a>ã€‚è¯¥åˆçº¦åŒ…æ‹¬ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°ç”Ÿæˆæœ€å¤§æ•°é‡çš„ tokensï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸åˆçº¦åˆ›å»ºè€…å…³è”çš„å¸æˆ·ä¸­ã€‚</p>
<p>è¦æŸ¥è¯¢æ™ºèƒ½åˆçº¦å…³è”çš„è´¦æˆ·å­˜å‚¨ä¿¡æ¯ï¼š</p>
<p>åœ¨ä»¥ <strong>evm</strong> ä½œä¸ºè¦æŸ¥è¯¢çŠ¶æ€çš„ Chain State ä¸­ï¼Œé€‰æ‹© <strong>accountStorages</strong>ã€‚</p>
<p>æŒ‡å®š ERC-20 åˆçº¦åœ°å€ <code>0x8a50db1e0f9452cfd91be8dc004ceb11cb08832f</code> ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>å°†è¦è¯»å–çš„å­˜å‚¨æ’æ§½æŒ‡å®šä¸ºç¬¬äºŒä¸ªå‚æ•° <code>0x045c0350b9cf0df39c4b40400c965118df2dca5ce0fbcf0de4aafc099aea4a14</code>ã€‚åœ°å€çš„å­˜å‚¨æ§½æ˜¯ä½¿ç”¨åŸºäºæ§½ä½ 0 å’Œå¸æˆ·æ ‡è¯†ç¬¦ <code>0xd43593c715fdd31c61141abd04a99fd6822c8558</code> çš„ <a href="https://github.com/substrate-developer-hub/frontier-node-template/tree/main/utils/README.md#--erc20-slot-slot-address">Substrate EVM utilities</a> è®¡ç®—å¾—åˆ°çš„ã€‚è¯¥å€¼åº”è¯¥è¿”å›çš„æ˜¯ <code>0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff</code>ã€‚å¦‚æœä½ åœ¨éƒ¨ç½²åˆåŒä¹‹åæ£€æŸ¥ <code>alice</code> å¸æˆ·çš„ä½™é¢ï¼Œä½ ä¼šçœ‹åˆ°ä»å¸æˆ·ä¸­æå–äº†ä¸€ç¬”è´¹ç”¨ï¼Œå¹¶ä¸” <code>getBalance(address, number)</code> è°ƒç”¨è¿”å›ä¸€ä¸ªç±»ä¼¼äºä¸‹é¢çš„å€¼ï¼š</p>
<pre><code class="language-bash editable noplayground">340,282,366,920,938,463,463,374,603,530,233,757,803
</code></pre>
<h3 id="è½¬ç§»ä»£å¸"><a class="header" href="#è½¬ç§»ä»£å¸">è½¬ç§»ä»£å¸</a></h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªä½¿ç”¨äº† <code>alice</code> å¼€å‘å¸æˆ·ã€‚æ¥ä¸‹æ¥æ˜¯ä½¿ç”¨éƒ¨ç½²çš„åˆçº¦å°† tokens è½¬ç§»åˆ°å¦ä¸€ä¸ªå¸æˆ·ã€‚</p>
<p>éªŒè¯ä½ çš„èŠ‚ç‚¹ä»åœ¨è¿è¡Œï¼Œå¹¶ä¸” <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> å·²è¿æ¥åˆ°è¯¥èŠ‚ç‚¹ã€‚</p>
<p>ç‚¹å‡» <strong>Developer</strong>ï¼Œç„¶åé€‰æ‹© <strong>Extrinsics</strong>ã€‚</p>
<p>é€‰æ‹© <strong>ALICE</strong> å¼€å‘å¸æˆ·ä½œä¸ºç”¨äºæäº¤äº¤æ˜“çš„å¸æˆ·ã€‚</p>
<p>é€‰æ‹© <strong>evm</strong>ã€‚</p>
<p>é€‰æ‹© <strong>call</strong> è°ƒç”¨ ERC-20 åˆçº¦ä¸Šçš„ <code>transfer(address, uint256)</code> å‡½æ•°ã€‚</p>
<p>é…ç½®è¯¥å‡½æ•°çš„å‚æ•°ï¼š
|<strong>For this</strong>|<strong>Specify this</strong>|
|:-----|:-----|
|<code>source</code>|0xd43593c715fdd31c61141abd04a99fd6822c8558|
|<code>target</code>|0x8a50db1e0f9452cfd91be8dc004ceb11cb08832f|
|<code>input</code>|0xa9059cbb0000000000000000000000008eaf04151687736326c9fea17e25fc528761369300000000000000000000000000000000000000000000000000000000000000dd|
|<code>value</code>|0|
|<code>gasLimit</code>|4294967295|
|<code>maxFeePerGas</code>|100000000|</p>
<p><code>source</code> è¡¨ç¤ºæŒæœ‰ tokens çš„å¸æˆ·ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>source</code> æ˜¯åˆçº¦åˆ›å»ºè€… <code>alice</code> çš„ EVM å¸æˆ·ã€‚<code>target</code> æ˜¯å°† tokens ä» <code>alice</code> è½¬ç§»åˆ° <code>bob</code> çš„åˆçº¦åœ°å€ã€‚<code>input</code> å‚æ•°æ˜¯ä¸€ä¸ª EVM ABI-encoded çš„å‡½æ•°è°ƒç”¨ï¼Œå®ƒæŒ‡å®šæ‰§è¡Œè½¬ç§»çš„å‡½æ•°è°ƒç”¨ï¼ˆ<code>0xa9059cbb</code>ï¼‰å’Œå‡½æ•°æ‰€éœ€çš„å‚æ•°ã€‚å¯¹äºè¿™ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ <code>bob</code> EVM å¸æˆ·æ ‡è¯†ç¬¦ï¼ˆ<code>0x8eaf04151687736326c9fea17e25fc5287613693</code>ï¼‰å’Œè¦è½¬ç§»çš„ <code>tokens</code> æ•°é‡ï¼ˆ221 æˆ– <code>0xdd</code> åå…­è¿›åˆ¶ï¼‰ã€‚æœ¬èŠ‚æ•™ç¨‹ä¸­çš„ input å€¼æ˜¯ä½¿ç”¨ <a href="http://remix.ethereum.org/">Remix web IDE</a> è®¡ç®—å¾—åˆ°çš„ã€‚</p>
<p>ç‚¹å‡» <strong>Submit Transaction</strong>ã€‚</p>
<p>ç‚¹å‡» <strong>Sign and Submit</strong> å¯¹äº¤æ˜“è¿›è¡Œæˆæƒã€‚</p>
<h3 id="éªŒè¯ä»£å¸è½¬ç§»"><a class="header" href="#éªŒè¯ä»£å¸è½¬ç§»">éªŒè¯ä»£å¸è½¬ç§»</a></h3>
<p>æäº¤äº¤æ˜“åï¼Œåˆçº¦å°†éƒ¨ç½²åˆ°ç½‘ç»œä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> æŸ¥çœ‹æœ‰å…³å®ƒçš„ä¿¡æ¯ã€‚</p>
<p>éªŒè¯ä½ çš„èŠ‚ç‚¹ä»åœ¨è¿è¡Œï¼Œå¹¶ä¸” <a href="https://polkadot.js.org/apps/#?rpc=ws://127.0.0.1:9944">Polkadot-JS application</a> å·²è¿æ¥åˆ°è¯¥èŠ‚ç‚¹ã€‚</p>
<p>ç‚¹å‡» <strong>Network</strong>ï¼Œç„¶åé€‰æ‹© <strong>Explorer</strong>ã€‚</p>
<p>ç‚¹å‡» <strong>evm.Executed</strong> äº‹ä»¶æ¥éªŒè¯å·²æ‰§è¡Œçš„åˆçº¦åœ°å€ä¸º <code>0x8a50db1e0f9452cfd91be8dc004ceb11cb08832f</code>ã€‚
<img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subevmexe.jpg" alt="" /></p>
<p>ç‚¹å‡» <strong>Developer</strong>ï¼Œç„¶åé€‰æ‹© <strong>Chain State</strong>ã€‚</p>
<p>é€‰æ‹© <strong>evm</strong> ä½œä¸ºè¦æŸ¥è¯¢çš„çŠ¶æ€å’Œ <strong>accountStorages</strong>ã€‚</p>
<p>æŸ¥çœ‹å­˜å‚¨åˆçº¦åœ°å€ <code>0x8a50db1e0f9452cfd91be8dc004ceb11cb08832f</code> å’Œå­˜å‚¨æ§½ <code>0x045c0350b9cf0df39c4b40400c965118df2dca5ce0fbcf0de4aafc099aea4a14</code>ã€‚
0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff22</p>
<p>å¦‚æœä½ åœ¨éƒ¨ç½²åˆçº¦ä¹‹åæ£€æŸ¥ <code>alice</code> å¸æˆ·çš„ä½™é¢ï¼Œä½ ä¼šçœ‹åˆ°ä»å¸æˆ·ä¸­æå–äº†ä¸€ç¬”è´¹ç”¨ï¼Œ<code>getBalance(address, number)</code> è°ƒç”¨è¿”å›ä¸€ä¸ªç±»ä¼¼äºä¸‹é¢çš„å€¼ï¼š
340,282,366,920,938,463,463,374,603,530,233,366,411</p>
<h2 id="ä»¥å¤ªåŠé›†æˆ"><a class="header" href="#ä»¥å¤ªåŠé›†æˆ">ä»¥å¤ªåŠé›†æˆ</a></h2>
<p>é€šè¿‡ä½¿ç”¨ Frontier é¡¹ç›®çš„ cratesï¼Œå¹¶å°† EVM å’Œ Ethereum pallets æ·»åŠ åˆ°ä½ çš„è¿è¡Œæ—¶ä¸­ï¼Œä½ å¯ä»¥æ„å»ºä¸€ä¸ªåŸºäº Substrate çš„åŒºå—é“¾ï¼Œå®ƒæ”¯æŒ Ethereum-based çš„è´¦æˆ·ï¼Œå¹¶å…è®¸æ‰§è¡Œ Solidity-based çš„æ™ºèƒ½åˆçº¦ã€‚</p>
<p>ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰æ˜¯ä¸€ç§è™šæ‹Ÿè®¡ç®—æœºï¼Œå…¶ç»„ä»¶ä½¿ä»¥å¤ªåŠç½‘ç»œå‚ä¸è€…èƒ½å¤Ÿå­˜å‚¨æ•°æ®å¹¶å°±æ•°æ®çš„çŠ¶æ€è¾¾æˆä¸€è‡´ã€‚å¯¹äºä¸€ä¸ªåŸºäº Substrate çš„åŒºå—é“¾ï¼ŒEVM çš„æ ¸å¿ƒèŒè´£åœ¨ <strong>EVM pallet</strong> ä¸­å®ç°çš„ã€‚EVM pallet è´Ÿè´£æ‰§è¡Œä»¥å¤ªåŠåˆçº¦å­—èŠ‚ç ï¼Œè¿™äº›æ™ºèƒ½åˆçº¦æ˜¯ç”¨åƒ Solidity è¿™æ ·çš„é«˜çº§è¯­è¨€ç¼–å†™çš„ï¼Œç„¶åç¼–è¯‘ä¸º EVM å­—èŠ‚ç ã€‚ä¸‹é¢çš„å›¾è¡¨æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¦‚è¿°ï¼Œä»¥è¯´æ˜å¦‚ä½•å°† EVM pallet å’Œä»¥å¤ªåŠ RPC è°ƒç”¨é›†æˆåˆ°ä½ çš„ Substrate è¿è¡Œæ—¶ä¸­ã€‚
<img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subpalevm.jpg" alt="" /></p>
<p>é™¤äº† EVM palletï¼ŒEthereum pallet è¿˜è´Ÿè´£å­˜å‚¨ Ethereum-formatted çš„å—ã€äº¤æ˜“æ”¶æ®å’Œäº¤æ˜“çŠ¶æ€ã€‚å½“ç”¨æˆ·æäº¤åŸå§‹ä»¥å¤ªåŠäº¤æ˜“æ—¶ï¼Œé€šè¿‡åœ¨è¿è¡Œæ—¶è°ƒç”¨ <code>pallet_ethereum </code>ä¸­çš„ <code>transact</code> å‡½æ•°ï¼Œè¯¥äº¤æ˜“é¦–å…ˆä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ª Substrate transactionã€‚
<img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subpaleth.jpg" alt="" /></p>
<p>è¯·æ³¨æ„ï¼Œä½¿ç”¨å•ç‹¬ä¸€ä¸ªç§é’¥ä¸èƒ½ä½¿ä»¥å¤ªåŠè´¦æˆ·å’Œ Substrate è´¦æˆ·ç›´æ¥å…¼å®¹ã€‚å…³äºä»¥å¤ªåŠå¸æˆ·ã€å¯†é’¥æ˜ å°„åˆ° Substrate å¸æˆ·ã€å¯†é’¥çš„ä¿¡æ¯ï¼Œè¯·å‚è§ Moonbeam æ–‡æ¡£ä¸­çš„ <a href="https://docs.moonbeam.network/learn/features/unified-accounts/#substrate-evm-compatible-blockchain">Unified Accounts</a>ã€‚</p>
<h3 id="ä»¥å¤ªåŠæŒ‡å®šçš„è¿è¡Œæ—¶apiså’Œrpcs"><a class="header" href="#ä»¥å¤ªåŠæŒ‡å®šçš„è¿è¡Œæ—¶apiså’Œrpcs">ä»¥å¤ªåŠæŒ‡å®šçš„è¿è¡Œæ—¶APIså’ŒRPCs</a></h3>
<p>è¿è¡Œæ—¶å­˜å‚¨æ‰€æœ‰å¯ä»¥æŸ¥è¯¢çš„ Ethereum-formatted çš„ä¿¡æ¯ã€‚ä½ å¯ä»¥è°ƒç”¨è¿è¡Œæ—¶å¹¶ä½¿ç”¨èŠ‚ç‚¹ RPC æœåŠ¡å™¨ã€è¿è¡Œæ—¶ API å’Œ RPC å®¢æˆ·ç«¯è°ƒç”¨æ£€ç´¢è¯¥ä¿¡æ¯ã€‚
<img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subtorpc.jpg" alt="" /></p>
<h3 id="frontieråŒºå—å¯¼å…¥"><a class="header" href="#frontieråŒºå—å¯¼å…¥">FrontieråŒºå—å¯¼å…¥</a></h3>
<p><img src="https://awesomeprogram.gitee.io/imgdata/tech_bc_subbloimp.jpg" alt="" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../blockchain/chapter_1_2_1_6.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../blockchain/chapter_1_2_1_8.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../blockchain/chapter_1_2_1_6.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../blockchain/chapter_1_2_1_8.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'G-ZHWPPT6ESV', 'auto');
                ga('send', 'pageview');
            }
        </script>


        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
